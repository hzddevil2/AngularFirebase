function chatCtrl(e,a){var s=this,n=a();s.messageNumber=15,e.saveSettings(s.messageNumber),s.saveSettings=function(){e.saveSettings(s.messageNumber),s.shownMessages=e.shownMessages()},s.messages=e.getMessages(),s.shownMessages=e.shownMessages(),s.sendMessage=function(){if(null!=s.author)var a={authorName:s.author.displayName,authorId:s.author.uid,authorPhoto:s.author.photoURL,text:s.newMessage};else alert("Please Login");""!=s.newMessage?(e.sendMessage(a),s.newMessage=""):alert("Type the message text")},s.login=function(){n.$signInWithPopup("google")},s.logout=function(){n.$signOut()},n.$onAuthStateChanged(function(e){s.author=e})}function chatService(e){var a=firebase.database().ref().child("messages"),s={messageNumber:15};return s.saveSettings=function(e){s.msg=e,s.messageNumber!=s.msg&&(s.messageNumber=s.msg)},s.getMessages=function(){return e(a)},s.shownMessages=function(){return e(a.limitToLast(s.messageNumber))},s.sendMessage=function(e){s.getMessages().$add(e)},s}function keySender(){return function(e,a,s){a.bind("keydown keypress",function(a){13===a.which&&(e.$apply(function(){e.$eval(s.keySender)}),a.preventDefault())})}}function menuActive(e){return{link:function(a,s,n){a.isActive=function(a){var s=a===e.path();return s}}}}var config={apiKey:"AIzaSyDoZuN9dUIcBRb2ZsiDKQJB5DOjXbh9BHI",authDomain:"angularfirebase-dd007.firebaseapp.com",databaseURL:"https://angularfirebase-dd007.firebaseio.com",storageBucket:"angularfirebase-dd007.appspot.com",messagingSenderId:"455959727640"};firebase.initializeApp(config),angular.module("angularFirebase",["firebase"]).config(router),angular.module("angularFirebase").controller("chatCtrl",["ChatService","$firebaseAuth",chatCtrl]),angular.module("angularFirebase").factory("ChatService",["$firebaseArray",chatService]),angular.module("angularFirebase").directive("keySender",[keySender]),angular.module("angularFirebase").directive("menuActive",["$location",menuActive]);